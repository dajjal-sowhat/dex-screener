import{bz as X,u as We,k as e,B as J,j as u,dq as te,f4 as U,f5 as Ae,f6 as qe,cI as ee,f7 as He,f8 as Fe,bl as Se,eE as Ue,aj as Q,cj as Le,ca as $e,cn as Oe,dD as Re,c2 as re,ct as ne,cu as _e,cr as Ve,at as q,dH as ae,cw as Ge,cx as Xe,cg as G,dh as Ke,dM as Y,dL as ze,bP as ce,a7 as R,bR as Qe,cq as Ye,f9 as oe,b_ as Be,bS as Je,c1 as Ze,a8 as he,fa as Pe,bn as es,x as B,K as H,fb as ss,I as ts,fc as ns,fd as as,fe as os,ff as ls,fg as is,fh as le,fi as ds,al as rs,am as cs,an as hs,ao as ms,ap as us,aq as ps,ar as bs,fj as xs,fk as fs,fl as gs,fm as ys,fn as Ns,fo as Cs,bu as Is,cF as js,W as ks,fp as ws,fq as vs,fr as Ts,dr as Ms,ep as Es,fs as Ds,b0 as Ws,T as As,q as qs,ft as Hs,cv as Fs,fu as me,eM as Ss,ak as Us,G as Ls,ay as Z,fv as $s,bW as O}from"../entries/pages_catch-all.DeNA4nR9.js";import{l as Os,T as Rs}from"./dex-pair-details-B1J-55mn.js";/* empty css                                                                            *//* empty css                                                                                                            *//* empty css                                                                                                          */import{g as _s,i as Vs,G as Gs,c as Xs}from"./ErrorMessageServerConnection-O3DygrcT.js";/* empty css                                                                                                          *//* empty css                                                                                                       */import{S as K}from"./span-BbxB5wGs.js";/* empty css                                                                                                  *//* empty css                                                                                          */import{b as Ks}from"./index.esm-DdF9dPvy.js";import{a as zs}from"./conditional-wrap-CI4-c_vk.js";import{u as Qs}from"./upperFirst-LabUiU-Y.js";import{u as Ys}from"./useDEXScreenerConnection-DX4t2Q9k.js";const Bs=X.string().transform((a,s)=>{try{return JSON.parse(a)}catch{return s.addIssue({code:"custom",message:"Invalid JSON"}),X.NEVER}});let Js=(a=21)=>{let s="",n=crypto.getRandomValues(new Uint8Array(a));for(;a--;){let l=n[a]&63;l<36?s+=l.toString(36):l<62?s+=(l-26).toString(36).toUpperCase():l<63?s+="_":s+="-"}return s};const se=({children:a,...s})=>{const{navWidth:n}=We();return e.jsx(J,{pos:"sticky",left:0,w:{base:"calc(100% - 1px)",lg:`calc(100vw - ${n}px - 25px)`},...s,children:a})},z={top:[{columnId:"token",label:"Token",className:"token",width:{base:"40vw",md:"27fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"price",label:"Price",className:"price",width:{base:"7fr",md:"9fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"pairAge",label:"Age",className:"pair-age",width:{base:"5fr",md:"5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"txns",label:"Txns",displayLabel:"Transactions",className:"txns",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"volume",label:"Volume",className:"volume",width:{base:"7fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"makers",label:"Makers",className:"makers",width:{base:"7fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeM5",label:"5M",className:"price-change-m5",width:{base:"7.5fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH1",label:"1H",className:"price-change-h1",width:{base:"7.5fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH6",label:"6H",className:"price-change-h6",width:{base:"7.5fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH24",label:"24H",className:"price-change-h24",width:{base:"7.5fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"liquidity",label:"Liquidity",className:"liquidity",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"marketCap",label:"MCAP",displayLabel:"Market Cap",className:"market-cap",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}}],new:[{columnId:"token",label:"Token",className:"token",width:{base:"40vw",md:"24fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"price",label:"Price",className:"price",width:{base:"11fr",md:"11fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"pairAge",label:"Age",className:"pair-age",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"buys",label:"Buys",className:"buys",width:{base:"5.5fr",md:"5.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"sells",label:"Sells",className:"sells",width:{base:"5.5fr",md:"5.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"volume",label:"Volume",className:"volume",width:{base:"7.5fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"makers",label:"Makers",className:"makers",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeM5",label:"5M",className:"price-change-m5",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH1",label:"1H",className:"price-change-h1",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH6",label:"6H",className:"price-change-h6",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH24",label:"24H",className:"price-change-h24",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"liquidity",label:"Liquidity",className:"liquidity",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"marketCap",label:"MCAP",displayLabel:"Market Cap",className:"market-cap",width:{base:"6fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}}],moonshot:[{columnId:"token",label:"Token",className:"token",width:{base:"52vw",md:"27fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"moonshot.progress",label:"Progress",className:"moonshot-progress",width:{base:"8fr",md:"10fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"fdv",label:"MCAP",displayLabel:"Market Cap",className:"fdv",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"pairAge",label:"Age",className:"pair-age",width:{base:"7fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"txns",label:"Txns",displayLabel:"Transactions",className:"txns",width:{base:"6.5fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"volume",label:"Volume",className:"volume",width:{base:"6.5fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"makers",label:"Makers",className:"makers",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeM5",label:"5M",className:"price-change-m5",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH1",label:"1H",className:"price-change-h1",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH6",label:"6H",className:"price-change-h6",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH24",label:"24H",className:"price-change-h24",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}}],"moonshot-finalized":[{columnId:"token",label:"Token",className:"token",width:{base:"40vw",md:"26fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"price",label:"Price",className:"price",width:{base:"10fr",md:"10fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"pairAge",label:"Age",className:"pair-age",width:{base:"5fr",md:"5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"txns",label:"Txns",displayLabel:"Transactions",className:"txns",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"volume",label:"Volume",className:"volume",width:{base:"7fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"makers",label:"Makers",className:"makers",width:{base:"7fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeM5",label:"5M",className:"price-change-m5",width:{base:"7.5fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH1",label:"1H",className:"price-change-h1",width:{base:"7.5fr",md:"6.5fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH6",label:"6H",className:"price-change-h6",width:{base:"7.5fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"priceChangeH24",label:"24H",className:"price-change-h24",width:{base:"7.5fr",md:"6fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"liquidity",label:"Liquidity",className:"liquidity",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}},{columnId:"marketCap",label:"MCAP",displayLabel:"Market Cap",className:"market-cap",width:{base:"7fr",md:"7fr"},minWidth:{base:"100px",md:"100px"}}]},ue=(a,s)=>{let n="default";return s!=null&&s.startsWith("moonshot")&&(n="launchpad"),s==="newPairs"&&(n="newPairs"),s==="watchlist"&&(n="watchlist"),`@dexscreener/screener-table/${n}/${a}/v1`},Zs=X.object({columnsHidden:te(X.string()),columnsOrder:te(X.string())}),Wt=(a,s)=>{const n=ue(a,s),[l,d]=Os(n,void 0,{raw:!0}),o=u.useMemo(()=>{const c={columnsHidden:[],columnsOrder:z[a].map(({columnId:i})=>i).filter(i=>i!=="token")};return Bs.pipe(Zs).catch(c).parse(l)},[l,a]),[t,r]=u.useState(o),h=u.useCallback(c=>{r(c),d(JSON.stringify(c))},[r,d]);return{settings:t,setSettings:h}},Ps=({className:a,icon:s,...n})=>e.jsx("button",{className:U("ds-icon-button",a),...n,children:s}),k=({className:a,children:s,onSort:n,direction:l,aside:d})=>e.jsxs("div",{className:U("ds-table-th",a),children:[!n&&s,n&&e.jsxs("button",{className:U("ds-table-th-button",{"ds-table-th-button-hl":l!==void 0}),onClick:n,children:[s,l&&e.jsx("span",{className:"ds-table-th-sort-icon-wrapper",children:l==="asc"?e.jsx(Ae,{className:"ds-table-th-sort-icon"}):e.jsx(qe,{className:"ds-table-th-sort-icon"})})]}),d&&d]}),et=({pricingMode:a,screenerVariant:s,sorting:n,onSort:l,onPricingModeToggleClick:d})=>{var r,h,c,i,m,p,g,N,C,T,I,v,M,E,b,x;const o=Object.fromEntries(z[s].map(({columnId:y,label:D,className:f})=>[y,{label:D,className:f}])),t=y=>{var D;return{className:`ds-dex-table-th-${(D=o[y])==null?void 0:D.className}`,direction:n.key===y?n.order:void 0,onSort:()=>l(y)}};return e.jsxs("div",{className:"ds-dex-table-th",children:[e.jsx(k,{...t("token"),children:(r=o.token)==null?void 0:r.label}),s==="moonshot"&&e.jsx(k,{...t("moonshot.progress"),children:(h=o["moonshot.progress"])==null?void 0:h.label}),s==="moonshot"&&e.jsx(k,{...t("fdv"),children:(c=o.fdv)==null?void 0:c.label}),s!=="moonshot"&&e.jsx(k,{...t("price"),aside:e.jsx(ee,{label:"Toggle USD/native price",shouldWrapChildren:!0,children:e.jsx(Ps,{className:"ds-dex-table-toggle-price-icon-button",onClick:d,"aria-label":"Toggle USD/native price",icon:a==="usd"?e.jsx(He,{className:"ds-dex-table-toggle-price-icon"}):e.jsx(Fe,{className:"ds-dex-table-toggle-price-icon"})})}),children:(i=o.price)==null?void 0:i.label}),e.jsx(k,{...t("pairAge"),children:(m=o.pairAge)==null?void 0:m.label}),s!=="new"&&e.jsx(k,{...t("txns"),children:(p=o.txns)==null?void 0:p.label}),s==="new"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{...t("buys"),children:(g=o.buys)==null?void 0:g.label}),e.jsx(k,{...t("sells"),children:(N=o.sells)==null?void 0:N.label})]}),e.jsx(k,{...t("volume"),children:(C=o.volume)==null?void 0:C.label}),e.jsx(k,{...t("makers"),children:e.jsx(ee,{placement:"left",label:"Unique wallets that bought or sold this pair",children:(T=o.makers)==null?void 0:T.label})}),e.jsx(k,{...t("priceChangeM5"),children:(I=o.priceChangeM5)==null?void 0:I.label}),e.jsx(k,{...t("priceChangeH1"),children:(v=o.priceChangeH1)==null?void 0:v.label}),e.jsx(k,{...t("priceChangeH6"),children:(M=o.priceChangeH6)==null?void 0:M.label}),e.jsx(k,{...t("priceChangeH24"),children:(E=o.priceChangeH24)==null?void 0:E.label}),s!=="moonshot"&&e.jsx(k,{...t("liquidity"),children:(b=o.liquidity)==null?void 0:b.label}),s!=="moonshot"&&e.jsx(k,{...t("marketCap"),children:(x=o.marketCap)==null?void 0:x.label})]})},A=()=>e.jsx("span",{className:"ds-table-empty-val",children:"-"}),w=({children:a,className:s})=>e.jsx("div",{className:U("ds-table-data-cell",s),children:a}),st=Se.memo(({platformId:a,dexId:s,screenerType:n,timeframeKey:l,screenerVariant:d,pairNumber:o,ammScreenerPair:t,pricingMode:r})=>{var y,D;const h=Ue(),{colorMode:c}=Q(),i=a??t.platformId??t.chainId,m=Le(i),p=!(m!=null&&m.isChainAndDEX)&&s!=="moonshot",g=f=>{f.ctrlKey||f.metaKey||(f.preventDefault(),i&&h({platformId:i,dexId:s??t.dexId??"",pairAddress:t.pairAddress}))},N=R(Xs),C=R(Qe),T=R(Ye),I=$e(i),v=Oe(t.dexId),M=t.marketCap??t.fdv,E=u.useMemo(()=>N({dsDataParams:_s({pair:t}),cmsParams:t.cmsProfile?{assetId:t.cmsProfile.iconId,fit:"crop"}:void 0}),[t,N]),b=Object.fromEntries(z[d].map(({columnId:f,className:L})=>[f,L])),x=f=>{const L=b[f];if(L===void 0)throw new Error(`Unknown column "${f}"`);return`ds-dex-table-row-col-${L}`};return e.jsxs("a",{className:U("ds-dex-table-row",`ds-dex-table-row-${d}`),href:i&&Re({platformId:i,pairAddress:t.pairAddress}),onClick:g,children:[e.jsxs(w,{className:x("token"),children:[e.jsxs("span",{className:"ds-dex-table-row-badge-pair-no",children:["#",o]}),n==="home"&&e.jsx("img",{className:"ds-dex-table-row-chain-icon",src:i&&C(i),title:i&&I,width:"16px",height:"16px",loading:"lazy"}),p&&(n==="home"||n==="chain")&&e.jsx("img",{className:"ds-dex-table-row-dex-icon",src:t.dexId&&T(t.dexId),title:t.dexId&&v,width:"14px",height:"14px",loading:"lazy"}),E&&t.chainId?e.jsx("img",{className:"ds-dex-table-row-token-icon",src:E,title:t.baseToken.name,width:"16px",loading:"lazy"}):e.jsx("span",{className:"ds-dex-table-row-token-icon ds-dex-table-row-token-icon-unknown",children:"?"}),t.labels&&t.labels.length>0&&e.jsx(e.Fragment,{children:t.labels&&t.labels.length>0&&((y=t.labels)==null?void 0:y.map(f=>e.jsx("span",{className:"ds-dex-table-row-badge ds-dex-table-row-badge-label",children:f},f)))}),Vs(t.boosts)?e.jsx(Gs,{className:"ds-dex-table-row-base-token-symbol",children:t.baseToken.symbol}):e.jsx("span",{className:"ds-dex-table-row-base-token-symbol",children:t.baseToken.symbol}),e.jsx("span",{className:"ds-dex-table-row-token-divider",children:"/"}),e.jsx("span",{className:"ds-dex-table-row-quote-token-symbol",children:t.quoteTokenSymbol}),e.jsxs("div",{className:"ds-dex-table-row-base-token-name",children:[e.jsx("span",{className:"ds-dex-table-row-base-token-name-text",children:t.baseToken.name}),t.boosts!==void 0&&t.boosts.active>0&&e.jsxs("span",{className:"ds-dex-table-row-base-token-name-boosts",children:[e.jsx(re,{})," ",t.boosts.active]}),d!=="moonshot-finalized"&&ne(t)&&e.jsx(_e,{className:"ds-dex-table-row-base-token-name-moonshot-icon"})]})]}),d==="moonshot"&&(Ve(t)||ne(t))&&e.jsx(w,{padding:0,className:x("moonshot.progress"),children:e.jsx(J,{py:2.5,my:-2.5,marginInline:-2,width:"calc(100% + var(--chakra-space-4))",bg:`linear-gradient(to right, ${q(oe.moonshotAlpha[600],oe.moonshotAlpha[550],c)} ${t.moonshot.progress}%, rgba(0, 0, 0, 0) ${t.moonshot.progress}%)`,children:e.jsxs(K,{pr:2,children:[t.moonshot.progress,"%"]})})}),d==="moonshot"&&e.jsx(w,{className:x("fdv"),children:M?ae(M):"-"}),d!=="moonshot"&&e.jsxs(w,{className:U("ds-dex-table-row-col-price",{"ds-dex-table-row-col-price-long":t.priceUsd&&t.priceUsd.length>=16}),children:[r==="usd"&&t.priceUsd&&Ge(t.priceUsd),(!t.priceUsd||r==="quote")&&Xe(t.price,t.quoteTokenSymbol)]}),e.jsx(w,{className:x("pairAge"),children:(t.pairCreatedAt&&e.jsx(Rs,{singleUnit:d!=="new",timestamp:t.pairCreatedAt}))??e.jsx(A,{})}),d!=="new"&&e.jsx(w,{className:x("txns"),children:G(t.txns[l].buys+t.txns[l].sells)}),d==="new"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{className:x("buys"),children:G(t.txns[l].buys)}),e.jsx(w,{className:x("sells"),children:G(t.txns[l].sells)})]}),e.jsx(w,{className:x("volume"),children:t.volume[l]?Ke(t.volume[l]??0):e.jsx(A,{})}),e.jsx(w,{className:x("makers"),children:(D=t.makers)!=null&&D[l]?G(t.makers[l]??0):e.jsx(A,{})}),e.jsx(w,{className:x("priceChangeM5"),children:e.jsx(Y,{value:t.priceChange.m5,empty:e.jsx(A,{})})}),e.jsx(w,{className:x("priceChangeH1"),children:e.jsx(Y,{value:t.priceChange.h1,empty:e.jsx(A,{})})}),e.jsx(w,{className:x("priceChangeH6"),children:e.jsx(Y,{value:t.priceChange.h6,empty:e.jsx(A,{})})}),e.jsx(w,{className:x("priceChangeH24"),children:e.jsx(Y,{value:t.priceChange.h24,empty:e.jsx(A,{})})}),d!=="moonshot"&&e.jsx(w,{className:x("liquidity"),children:t.liquidity?ze(t.liquidity.usd):e.jsx(A,{})}),d!=="moonshot"&&e.jsx(w,{className:x("marketCap"),children:t.marketCap?ae(t.marketCap):e.jsx(A,{})})]})},(a,s)=>{const n=[a.platformId,a.dexId,a.screenerType,a.timeframeKey,a.screenerVariant,a.pairNumber,a.ammScreenerPair,a.pricingMode],l=[s.platformId,s.dexId,s.screenerType,s.timeframeKey,s.screenerVariant,s.pairNumber,s.ammScreenerPair,s.pricingMode];return ce(n,l)}),At=a=>{const{isLoading:s,platformId:n,dexId:l,screenerType:d,timeframeKey:o,latestScreenerTimeframeKey:t,screenerVariant:r,screenerPairs:h,page:c,isSwitchingPage:i,sorting:m,onSort:p,settings:g,customScreenerId:N}=a,C=R(he),{colorMode:T}=Q(),[I,v]=u.useState("usd"),M=()=>{C.track({event:"screenerTable:togglePricingMode"}),v(I==="usd"?"quote":"usd")},E=t?t!==o:!1;u.useMemo(()=>ue(r,N),[N,r]),u.useMemo(()=>z[r].map(y=>y.columnId),[r]);const b=Be("breakpoints","md"),x=u.useMemo(()=>tt({columns:z[r],settings:g,screenerVariant:r,md:b}),[b,r,g]);return u.useMemo(()=>Js(),[]),e.jsxs(e.Fragment,{children:[e.jsxs(Je,{defer:!1,children:[!1,e.jsx("style",{id:"RUNTIME STYLES",children:x})]}),e.jsxs("div",{className:U("ds-dex-table",`ds-dex-table-${r}`),children:[e.jsx(et,{onPricingModeToggleClick:M,pricingMode:I,screenerVariant:r,sorting:m,onSort:p}),!s&&!E&&!i&&t&&h.map((y,D)=>e.jsx(st,{platformId:n,dexId:l,screenerType:d,timeframeKey:t,screenerVariant:r,pairNumber:(c-1)*100+(D+1),ammScreenerPair:y,pricingMode:I},n?`${n}:${y.pairAddress}`:`${y.platformId??y.chainId}:${y.pairAddress}`))]}),!s&&!E&&h&&h.length===0&&e.jsx(se,{children:e.jsx("p",{className:"ds-dex-table-empty",children:"Nothing to see here..."})}),(s||E||i)&&e.jsx(se,{children:e.jsx(Ze,{size:"sm",p:4,color:q("gray.500","blue.600",T)})})]})};function tt(a){const{columns:s,settings:n,screenerVariant:l,md:d}=a,o=c=>`.ds-dex-table-${c}`,t=(c,i)=>`${o(c)} .ds-dex-table-th-${i}, ${o(c)} .ds-dex-table-row-col-${i}`,r=[],h=[];for(let c=0;c<s.length;c++){const i=s[c];if(!i)continue;const m=n.columnsHidden.includes(i.columnId);if(r.push(`${t(l,i.className)} {
        display: ${m?"none":"flex"} !important;
      }`),!m)if(i.columnId==="token")h.push({...i,order:-1});else{let p=n.columnsOrder.indexOf(i.columnId);p===-1&&(p=s.length+c),h.push({...i,order:p})}}h.sort((c,i)=>c.order-i.order);for(const c of h){const i=s.find(m=>m.columnId===c.columnId);i&&r.push(`${t(l,i.className)} {
          order: ${c.order} !important;
        }`)}return r.push(`
    ${o(l)} {
      --ds-dex-screener-column-layout: ${h.map(c=>c.width.base).join(" ")} !important;
      min-width: calc(${h.map(c=>c.minWidth.base).join(" + ")});
    }
  `),r.push(`
    @media screen and (min-width: ${d}) {
      ${o(l)} {
        --ds-dex-screener-column-layout: ${h.map(c=>c.width.md).join(" ")} !important;
        min-width: calc(${h.map(c=>c.minWidth.md).join(" + ")});
      }
    }
  `),r.join(`
`)}const P=({type:a,icon:s,color:n,label:l,tooltipLabel:d,value:o,isDisabled:t,customScreenerParams:r,onCustomScreenerParamsChange:h})=>{var g;const{colorMode:c}=Q(),i=u.useCallback((N,C)=>{switch(N){case"ads":return{recentPurchasedImpressions:C?{min:1}:void 0};case"boosts":return{activeBoosts:C?{min:1}:void 0};case"eti":return{enhancedTokenInfo:C?!0:void 0}}},[]),m=u.useCallback(()=>{var N;if(!t&&h){const C=!o,T={filters:Pe({...(N=r==null?void 0:r.params)==null?void 0:N.filters,...i(a,C)})};h(T)}},[t,h,(g=r==null?void 0:r.params)==null?void 0:g.filters,i,a,o]),p=es({base:!1,md:!0,"3xl":!1},{fallback:"md"});return e.jsx(ee,{isDisabled:!p,label:d,children:e.jsxs(B,{role:"group",onClick:m,variant:"outline",size:"sm",bg:o?q("blackAlpha.50","whiteAlpha.50",c):void 0,_hover:{},_active:{},_focus:{boxShadow:"none"},px:"3",children:[e.jsx(H,{as:s,color:n}),e.jsx(K,{lineHeight:1,display:{md:"none","3xl":"initial"},ml:1,color:o?n:void 0,children:l}),e.jsx(H,{ml:1,as:ss,opacity:o?void 0:.2,color:o?n:void 0,_groupHover:{opacity:1},transition:"opacity 0.25s"})]})})},qt=({isVisible:a,isDisabled:s,customScreenerParams:n,onCustomScreenerParamsChange:l})=>{var o,t,r,h,c,i,m,p;const{colorMode:d}=Q();return e.jsxs(ts,{sx:{"> button:not(:first-of-type)":{borderLeftWidth:0}},isAttached:!0,role:void 0,children:[a.eti&&e.jsx(P,{type:"eti",icon:ns,color:q("accent.550","accent.200",d),label:"Profile",tooltipLabel:"Has Profile",isDisabled:s,value:(t=(o=n==null?void 0:n.params)==null?void 0:o.filters)==null?void 0:t.enhancedTokenInfo,customScreenerParams:n,onCustomScreenerParamsChange:l}),a.boosts&&e.jsx(P,{type:"boosts",icon:re,color:"boost.accent.screener",label:"Boosted",tooltipLabel:"Is Boosted",isDisabled:s,value:!!((c=(h=(r=n==null?void 0:n.params)==null?void 0:r.filters)==null?void 0:h.activeBoosts)!=null&&c.min),customScreenerParams:n,onCustomScreenerParamsChange:l}),a.ads&&e.jsx(P,{type:"ads",icon:Ks,color:q("accent.darkGreen","accent.lightGreen",d),label:"Ads",tooltipLabel:"Is Advertising",isDisabled:s,value:!!((p=(m=(i=n==null?void 0:n.params)==null?void 0:i.filters)==null?void 0:m.recentPurchasedImpressions)!=null&&p.min),customScreenerParams:n,onCustomScreenerParamsChange:l})]})},nt=({data:a,onToggleEnabled:s})=>{const{colorMode:n}=Q(),{attributes:l,listeners:d,setNodeRef:o,transform:t,transition:r,isDragging:h}=as({id:a.id}),c=q("gray.50","blue.900",n);return e.jsxs(J,{ref:o,position:"relative",display:"flex",alignItems:"center",borderWidth:1,borderRadius:"md",opacity:a.isEnabled?1:.5,borderColor:q("gray.100","blue.875",n),backgroundColor:h?c:q("gray.25","blue.925",n),zIndex:h?"toast":1,_hover:{bg:c},style:{transform:os.Transform.toString(t),transition:r},children:[e.jsx(zs,{padding:2,onChange:()=>s(a.id),isChecked:a.isEnabled,children:a.displayLabel??a.label}),e.jsx(K,{w:"100%",flex:1,display:"flex",alignItems:"center",justifyContent:"flex-end",alignSelf:"stretch",cursor:"move",pr:"2",_focus:{boxShadow:"none"},...l,...d,children:e.jsx(H,{as:ls})})]})};function ie(a,s){const n=a.filter(({columnId:l})=>l!=="token").map(({columnId:l,label:d,displayLabel:o})=>({id:l,label:d,displayLabel:o,isEnabled:s?!s.columnsHidden.includes(l):!0}));return s&&n.sort(function(l,d){let o=s.columnsOrder.indexOf(l.id);o===-1&&(o=s.columnsOrder.length+n.indexOf(l));let t=s.columnsOrder.indexOf(d.id);return t===-1&&(t=s.columnsOrder.length+n.indexOf(d)),o-t}),n}const at=u.memo(({onChange:a,onClose:s,defaultColumnsOrder:n,settings:l})=>{const[d,o]=u.useState(ie(n,l)),t=is(le(Ts),le(vs,{coordinateGetter:ws})),r=u.useCallback(()=>{a({columnsHidden:d.filter(m=>!m.isEnabled).map(m=>m.id),columnsOrder:d.map(m=>m.id)}),s()},[d,a,s]),h=u.useCallback(m=>{const{active:p,over:g}=m;!g||p.id===g.id||o(N=>{const C=N.findIndex(I=>I.id===p.id),T=N.findIndex(I=>I.id===g.id);return ds([...N],C,T)})},[]),c=u.useCallback(m=>{o(p=>p.map(g=>g.id!==m?g:{...g,isEnabled:!g.isEnabled}))},[]),i=u.useCallback(()=>{o(ie(n))},[n]);return e.jsxs(rs,{size:{base:"full",md:"2xl"},scrollBehavior:"inside",onClose:s,motionPreset:"none",blockScrollOnMount:!0,isOpen:!0,children:[e.jsx(cs,{}),e.jsxs(hs,{children:[e.jsx(ms,{}),e.jsx(us,{children:e.jsx(ps,{size:"md",children:"Customize Screener"})}),e.jsx(bs,{p:{base:2,md:4},children:e.jsx(J,{as:"form",onSubmit:r,display:"flex",flexDir:"column",gap:{base:1.5,md:2.5},children:e.jsx(xs,{sensors:t,collisionDetection:fs,onDragEnd:h,modifiers:[gs,ys],children:e.jsx(Ns,{items:d.map(({id:m})=>m),strategy:Cs,children:d.map(m=>e.jsx(nt,{data:m,onToggleEnabled:c},m.id))})})})}),e.jsxs(Is,{gap:"3",children:[e.jsx(B,{onClick:r,leftIcon:e.jsx(H,{as:js}),colorScheme:"accent",children:"Apply"}),e.jsx(B,{onClick:i,variant:"outline",leftIcon:e.jsx(H,{as:ks}),children:"Reset"})]})]})]})}),ot=({onSettingsChange:a})=>{const s=R(he),{value:n,enable:l,disable:d}=Ms(!1),o=u.useCallback(()=>{s.track({event:"screenerControl:tableSettings:click"}),l()},[s,l]),t=u.useCallback(r=>{s.track({event:"screenerControl:tableSettings:apply"}),a(r)},[s,a]);return{isModalOpened:n,openModal:o,closeModal:d,handleSettingsChange:t}},Ht=({settings:a,defaultColumnsOrder:s,onSettingsChange:n})=>{const{isModalOpened:l,closeModal:d,openModal:o,handleSettingsChange:t}=ot({onSettingsChange:n});return e.jsxs(e.Fragment,{children:[e.jsxs(B,{leftIcon:e.jsx(H,{as:Es}),variant:"outline",onClick:o,size:"sm",pos:"relative",iconSpacing:{base:1.5,md:0,"3xl":1.5},children:[e.jsx(K,{display:{md:"none","3xl":"initial"},children:"Customize"}),e.jsx(K,{pos:"absolute",top:"-6px",right:"-6px",px:"3px",fontSize:"10px",bg:"accent.lightGreen",color:"blackAlpha.800",borderRadius:"md",children:"new!"})]}),l&&e.jsx(at,{settings:a,defaultColumnsOrder:s,onChange:t,onClose:d})]})},de=({label:a,path:s,range:n,direction:l})=>e.jsxs(qs,{variant:"outline",size:"sm",fontWeight:"normal",to:s,...l==="previous"?{leftIcon:e.jsx(H,{as:Hs})}:void 0,...l==="next"?{rightIcon:e.jsx(H,{as:Fs})}:void 0,children:[Qs(a)," ",n[0],"-",n[1]]}),Ft=({label:a,currentPage:s,currentPageItemsCount:n,count:l,getPagePath:d,perPage:o=100})=>{const{search:t}=Ds(),r=u.useMemo(()=>{const m=new URLSearchParams(t);return m.sort(),`?${m.toString()}`},[t]),h=(s-1)*o+1,c=(s-1)*o+o,i=l!==void 0?Math.min(c,l):c;return e.jsx(se,{children:e.jsxs(Ws,{direction:{base:"column",md:"row"},spacing:4,alignItems:"center",justifyContent:"center",fontSize:"sm",px:2,pt:5,sx:{"a:hover":{textDecor:"none"}},alignSelf:"flex-end",children:[e.jsxs(As,{as:"span",children:["Showing ",a.toLowerCase()," ",h,"-",i,l&&` of ${G(l)}`]}),s>1&&e.jsx(de,{label:a,path:d({page:s-1,search:r}),range:[(s-2)*o+1,(s-2)*o+o],direction:"previous"}),n===o&&e.jsx(de,{label:a,path:d({page:s+1,search:r}),range:[s*o+1,s*o+o],direction:"next"})]})})},lt=["pairAddress","baseToken.address","baseToken.name","baseToken.symbol","quoteToken.symbol"];function it(a){var o;if(!a.data)return;if(!a.query)return a.data;const s=a.fields??lt,n=a.query.toLowerCase(),l=(o=a.data.pairs)==null?void 0:o.filter(t=>s.map(h=>dt(t,h)).filter(h=>!!h).some(h=>h.includes(n))),d=rt(l??[]);return{...a.data,pairs:l,stats:d}}function dt(a,s){const n=me(a,s);if(n!=null)return`${n}`.toLocaleLowerCase()}function rt(a){const s={h24:0,h6:0,h1:0,m5:0},n={h24:0,h6:0,h1:0,m5:0};for(const l of a)for(const d of Ss)s[d]+=l.txns[d].buys+l.txns[d].sells,n[d]+=l.volume[d]??0;return{h24:{txns:s.h24,volumeUsd:n.h24},h6:{txns:s.h6,volumeUsd:n.h6},h1:{txns:s.h1,volumeUsd:n.h1},m5:{txns:s.m5,volumeUsd:n.m5}}}function ct(a){if(!a.data)return;const s=Us(a.data.pairs,n=>{var d,o;if(a.sorting.key==="token")return n.baseToken.symbol;if(a.sorting.key==="txns")return n.txns[a.timeframeKey].buys+n.txns[a.timeframeKey].sells||Number.NEGATIVE_INFINITY;if(a.sorting.key==="price")return n.priceUsd?new Ls(n.priceUsd.replace(/,/g,"")).toNumber():Number.NEGATIVE_INFINITY;if(a.sorting.key==="buys")return n.txns[a.timeframeKey].buys;if(a.sorting.key==="sells")return n.txns[a.timeframeKey].sells;if(a.sorting.key==="pairAge")return n.pairCreatedAt?-n.pairCreatedAt:Number.POSITIVE_INFINITY;if(a.sorting.key==="volume")return n.volume[a.timeframeKey]||Number.NEGATIVE_INFINITY;if(a.sorting.key==="makers")return(d=n.makers)==null?void 0:d[a.timeframeKey];if(a.sorting.key==="liquidity")return((o=n.liquidity)==null?void 0:o.usd)||Number.NEGATIVE_INFINITY;if(a.sorting.key==="priceChangeH24")return n.priceChange.h24??Number.NEGATIVE_INFINITY;if(a.sorting.key==="priceChangeH6")return n.priceChange.h6??Number.NEGATIVE_INFINITY;if(a.sorting.key==="priceChangeH1")return n.priceChange.h1??Number.NEGATIVE_INFINITY;if(a.sorting.key==="priceChangeM5")return n.priceChange.m5??Number.NEGATIVE_INFINITY;const l=me(n,a.sorting.key);return l??Number.NEGATIVE_INFINITY},a.sorting.order);return{...a.data,pairs:s}}const ht=()=>{const[a,s]=u.useState("");return{searchQuery:a,setSearchQuery:s}},mt={key:"txns",order:"desc"},ut=(a,s)=>{const[n,l]=u.useState(s??a??mt),d=u.useCallback((o,t)=>{l(r=>o===r.key?{key:o,order:t||(r.order==="asc"?"desc":"asc")}:o==="token"?{key:o,order:t||"asc"}:{key:o,order:t||"desc"})},[]);return u.useEffect(()=>{!(s!=null&&s.key)||!s.order||l({key:s==null?void 0:s.key,order:s==null?void 0:s.order})},[s==null?void 0:s.key,s==null?void 0:s.order]),{sorting:n,setSorting:d}};function pt(a){const{config:s,defaultQuery:n,rankFilterOptions:l,initialData:d,screenerControlValue:o,onScreenerControlValueChange:t,queryStrategy:r="replace"}=a,{page:h,timeframe:c}=o,[i,m]=u.useState(d),p=u.useMemo(()=>{var j,W,F,_,V,$;switch(r){case"replace":return o.query??n;case"merge":return o.query?{rankBy:(j=o.query)!=null&&j.rankBy?{...n.rankBy,...(W=o.query)==null?void 0:W.rankBy}:n.rankBy,filters:(F=o.query)!=null&&F.filters?{...n.filters,...(_=o.query)==null?void 0:_.filters,moonshotProgress:{...(V=n.filters)==null?void 0:V.moonshotProgress,...($=o.query)==null?void 0:$.filters.moonshotProgress}}:n.filters}:n}},[r,n,o]),g=ut(n==null?void 0:n.rankBy,p==null?void 0:p.rankBy),N=Ys({query:p,page:h,timeframeKey:c}),C=ht(),{client:T,info:I,status:v}=N,[M,E]=u.useState({page:h,namespace:I.namespace,query:I.query}),b=Z(o),x=Z(M),y=Z(I),D=u.useMemo(()=>o.query?ce(n,o.query)===!1:!1,[n,o.query]),f=u.useCallback(j=>{t==null||t({...b.current,...j})},[t,b]),L=u.useCallback(j=>{f({...b.current,timeframe:j,page:1})},[f,b]),be=u.useCallback(j=>{f({...b.current,query:{...b.current.query,rankBy:j},page:1})},[b,f]),xe=u.useCallback(j=>{f({...b.current,page:j})},[f,b]),fe=u.useCallback(j=>{f({...b.current,query:j,page:1})},[f,b]),ge=u.useCallback(j=>{console.log("setDisplayType",b.current),f({...b.current,displayType:j})},[f,b]);u.useEffect(()=>{if(!T)return;const j=T.message.subscribe(W=>{switch(W.type){case"pairs":{m($=>({...$,schemaVersion:W.schemaVersion,pairs:W.pairs,pairsCount:W.pairsCount,stats:W.stats,page:b.current.page}));const F=x.current.page!==b.current.page,_=x.current.namespace!==y.current.namespace,V=x.current.query!==y.current.query;(F||_||V)&&E($=>{let S={};return F&&(S={...S,page:b.current.page}),_&&(S={...S,namespace:y.current.namespace}),V&&(S={...S,query:y.current.query}),{...$,...S}});return}case"latestBlock":m(F=>({...F,schemaVersion:W.schemaVersion,latestBlock:W.latestBlock??void 0}));return}});return()=>j.unsubscribe()},[T,b,x,y]);const{uniswapScreenerServer:ye}=R($s),Ne=!i&&(!i&&(v==="idle"||v==="connecting"))||(!(i!=null&&i.stats)||!(i!=null&&i.pairs))&&v==="connected",Ce=v==="connected",Ie=!i&&(v==="closed"||v==="reconnecting"),je=!!i&&v==="reconnecting",ke=!!i&&ye.schemaVersion!==i.schemaVersion,we=h>1||(i==null?void 0:i.pairsCount)!==void 0&&!!(i!=null&&i.pairs)&&(i==null?void 0:i.pairsCount)>(i==null?void 0:i.pairs.length),ve=!!i&&M.namespace!==I.namespace,Te=!!i&&M.query!==I.query,Me=i!==void 0?M.page!==h:!1,Ee={isSwitchingNamespace:ve,isLoading:Ne,isReconnecting:je,isDisconnected:Ie,isSchemaOutdated:ke,hasPagination:we,isSwitchingPage:Me,isUpdatingFilters:Te,isConnected:Ce},De=u.useMemo(()=>ct({data:it({data:i,query:C.searchQuery}),sorting:g.sorting,timeframeKey:c}),[i,g.sorting,c,C.searchQuery]);return{config:s,searchQuery:C,data:De,sorting:g,state:Ee,rankFilterOptions:l,controlValue:o,setControlValue:f,setDisplayType:ge,setTimeframe:L,setPage:xe,setQuery:fe,setRankBy:be,isCustomQuery:D,currentQuery:p}}const pe=u.createContext({config:{screenerType:"home",chainId:null,dexId:null},data:void 0,rankFilterOptions:void 0,searchQuery:{searchQuery:"",setSearchQuery:()=>{}},sorting:{sorting:{key:"txns",order:"desc"},setSorting:()=>{}},state:{hasPagination:!1,isConnected:!1,isDisconnected:!1,isLoading:!1,isReconnecting:!1,isSchemaOutdated:!1,isSwitchingNamespace:!1,isSwitchingPage:!1,isUpdatingFilters:!1},setTimeframe:O,setControlValue:O,setDisplayType:O,setPage:O,setQuery:O,setRankBy:O,currentQuery:{},isCustomQuery:!1,controlValue:{page:1,timeframe:"h24",query:void 0,displayType:"grid"}}),St=()=>u.useContext(pe),Ut=({children:a,defaultQuery:s,rankFilterOptions:n,screenerConfig:l,initialData:d,screenerControlValue:o,onScreenerControlValueChange:t,queryStrategy:r})=>{const h=pt({config:l,defaultQuery:s,rankFilterOptions:n,initialData:d,screenerControlValue:o,onScreenerControlValueChange:t,queryStrategy:r});return e.jsx(pe.Provider,{value:h,children:a})};export{Ut as D,qt as S,Ht as a,Wt as b,z as c,At as d,Ft as e,St as u};
