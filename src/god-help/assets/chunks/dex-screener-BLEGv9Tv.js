import{aj as je,k as e,B as D,H as ee,at as ie,dh as sl,cg as ve,b0 as Be,di as O,ch as al,bN as Ce,cj as nl,j as A,cm as rl,x as $,dj as tl,T as P,bO as de,dk as Ie,dl as Me,al as He,am as Ve,an as Le,ao as Oe,ap as $e,aq as Fe,ar as qe,bu as We,K as X,cF as Ue,a7 as ce,bR as il,cq as ol,cZ as cl,b1 as K,dm as p,dn as dl,Q as De,V as ue,dp as b,bP as ul,W as hl,d1 as xl,bz as M,dq as ke,X as Xe,dr as gl,a8 as _e,ds as ml,ay as jl,M as Ge,J as Ye,dt as pl,bM as fl,bV as bl,P as Qe,N as Je,O as me,R as oe,du as Sl,dv as vl,dw as Cl,dx as Il,bp as Ml,I as Dl,u as kl,dy as Al,dz as yl,dA as Pl,aN as wl,bm as zl,d9 as Tl,dB as El}from"../entries/pages_catch-all.DeNA4nR9.js";import{H as Rl,a as Nl}from"./dex-search.service-DBnH3Ikf.js";import{C as he,t as Bl,g as Hl,E as Vl}from"./uniswap-swap-widget.util-ldD7fXt1.js";import{AMMPairDetailModal as Ll}from"./AMMPairDetailModal-CszQeVVW.js";import{D as Ol}from"./delayed-Cer_z3Z7.js";import{L as Ae}from"./live-time-ago-BwNzQOl9.js";import{S as f}from"./span-BbxB5wGs.js";import{S as $l,a as Fl,b as ql,c as Wl,d as Ul,e as Xl,u as _l}from"./dex-screener-context-a-UMKe71.js";import{E as Gl}from"./ErrorMessageServerConnection-O3DygrcT.js";import{c as ye}from"./AMMPairDetailChart-CS14F-Eu.js";import{W as Yl,a as Ql,I as E}from"./chunk-7ELO524Q-A9cFyVaT.js";import{I as U,b as te}from"./price-alerts-button-D5q9y85X.js";const xe=({children:s})=>{const{colorMode:a}=je();return e.jsx(Be,{direction:{base:"column",md:"row"},spacing:{base:0,md:"2"},minHeight:"12",flex:"1",alignItems:"center",padding:"1",borderWidth:1,borderColor:ie("gray.100","blue.900",a),borderRadius:"md",textTransform:"uppercase",children:s})},Jl=({containerProps:s,latestBlock:a,stats:r,timeframeKey:o})=>{const t=O[o],{colorMode:c}=je();return e.jsx(D,{fontSize:"sm",...s,children:e.jsxs(ee,{children:[e.jsxs(xe,{children:[e.jsx(D,{flex:"1",textAlign:{base:"center",md:"right"},children:e.jsxs(f,{color:ie("gray.400","blue.400",c),noOfLines:1,children:[t.shorthand," Volume",e.jsx(f,{display:{base:"none",md:"initial"},children:":"})]})}),e.jsx(D,{display:"flex",flex:"1",textAlign:{base:"center",md:"left"},fontSize:{md:"lg"},children:e.jsx(he,{value:r.volumeUsd,children:e.jsx(f,{fontWeight:"semibold",children:sl(r.volumeUsd)})})})]}),e.jsxs(xe,{children:[e.jsx(D,{flex:"1",textAlign:{base:"center",md:"right"},children:e.jsxs(f,{color:ie("gray.400","blue.400",c),noOfLines:1,children:[t.shorthand," Txns",e.jsx(f,{display:{base:"none",md:"initial"},children:":"})]})}),e.jsx(D,{display:"flex",flex:"1",textAlign:{base:"center",md:"left"},fontSize:{md:"lg"},children:e.jsx(he,{value:r.txns,children:e.jsx(f,{fontWeight:"semibold",children:ve(r.txns)})})})]}),a&&e.jsxs(xe,{children:[e.jsx(D,{flex:"2",textAlign:{base:"center",md:"right"},children:e.jsxs(ee,{align:"flex-end",justifyContent:{base:"center",md:"flex-end"},color:ie("gray.400","blue.400",c),spacing:"1",noOfLines:1,children:[e.jsxs(f,{children:[e.jsx(f,{display:{base:"none",md:"initial"},children:"Latest "}),"Block",e.jsx(f,{display:{base:"none",md:"initial"},children:":"})]}),e.jsx(f,{display:{base:"inline-block",md:"none"},ml:"2px",fontSize:"xs",textTransform:"none",opacity:.5,children:e.jsx(Ae,{timestamp:a.blockTimestamp})})]})}),e.jsxs(D,{display:"flex",alignItems:"center",flex:"3",textAlign:{base:"center",md:"left"},fontSize:{md:"lg"},children:[e.jsx(he,{value:a.blockNumber,children:e.jsx(f,{fontWeight:"semibold",children:ve(a.blockNumber)})}),e.jsx(f,{noOfLines:1,display:{base:"none",md:"inline-block"},ml:2,fontSize:"sm",textTransform:"none",opacity:.5,children:e.jsx(Ae,{timestamp:a.blockTimestamp})})]})]})]})})},Ze=["txns","buys","sells","volume","priceChange"],Ke=["liquidity","marketCap","fdv","pairAge"],Zl=s=>{if(!s.query)return 0;let a=0;return s.query.filters&&(!s.excludePlatforms&&s.query.filters.chainIds&&(a+=1),!s.excludeDexes&&s.query.filters.dexIds&&(a+=1),Ze.forEach(r=>{var t,c;const o=(c=(t=s.query)==null?void 0:t.filters)==null?void 0:c[r];o&&Object.keys(o).forEach(m=>{["min","max"].forEach(h=>{var i;((i=o[m])==null?void 0:i[h])!==void 0&&(a+=1)})})}),Ke.forEach(r=>{["min","max"].forEach(o=>{var c,m;const t=(m=(c=s.query)==null?void 0:c.filters)==null?void 0:m[r];t&&t[o]!==void 0&&(a+=1)})})),a},Pe=({isChecked:s})=>e.jsx(X,{as:Ue,opacity:s?1:.1,mr:2}),we={variant:"outline",_focus:{boxShadow:"none"}},ze={variant:"solid",colorScheme:"blue",borderWidth:1,borderColor:"transparent",_hover:{}},Te=({type:s,platformId:a,value:r,onChange:o,buttonProps:t})=>{const c=al(),{discoverableChains:m}=Ce(),h=nl(s==="dex"?a??void 0:void 0),i=A.useMemo(()=>s==="platform"?m.map(x=>x.slug):s==="dex"&&h?h.dexes:rl,[h,m,s]),[u,C]=A.useState(Ee(i,r)),y=u.length===i.length;ye(()=>{const x=u.length===i.length;s==="platform"&&r==="all"&&!x&&C(i)},[s,r]),ye(()=>{s==="dex"&&C(i)},[s,r,a]),A.useEffect(()=>{C(Ee(i,r))},[i,r]);const w=ce(il),k=ce(ol),B=x=>{y?C([x]):u.includes(x)?C(u.filter(q=>q!==x)):C([...u,x])},F=()=>{o(y?"all":u),c.onClose()},{chains:H,dexes:z}=Ce();return e.jsxs(e.Fragment,{children:[e.jsxs($,{onClick:c.onOpen,...t,isDisabled:(t==null?void 0:t.isDisabled)||s==="dex"&&!a,children:[r==="all"&&(s==="platform"?"All Platforms":"All DEXes"),r!=="all"&&tl(r)&&r.length===1&&e.jsxs(P,{as:"span",display:"flex",alignItems:"center",children:[e.jsx(de,{mr:2,src:s==="platform"?w(r[0]):k(r[0]),w:"22px",h:"22px",loading:"lazy"}),s==="platform"&&Ie(H,r[0]),s==="dex"&&Me(z,r[0])]}),r!=="all"&&r.length>1&&e.jsxs(ee,{spacing:1,children:[r.slice(0,5).map(x=>e.jsx(de,{src:s==="platform"?w(x):k(x),w:"22px",h:"22px",loading:"lazy"},x)),r.length>6&&e.jsxs(P,{as:"span",opacity:.5,fontSize:"sm",pl:1,children:["+",u.length-6]})]})]}),c.isOpen&&e.jsxs(He,{size:"4xl",scrollBehavior:"inside",onClose:c.onClose,motionPreset:"none",blockScrollOnMount:!1,isOpen:!0,children:[e.jsx(Ve,{}),e.jsxs(Le,{children:[e.jsx(Oe,{}),e.jsx($e,{children:e.jsxs(Fe,{size:"md",children:["Select ",s==="platform"?"Platforms":"DEXes"]})}),e.jsx(qe,{p:5,children:e.jsxs(Yl,{justify:"center",spacing:3,children:[e.jsxs($,{onClick:()=>C(i),size:{base:"sm",lg:"md"},...we,...y?ze:void 0,children:[e.jsx(Pe,{isChecked:y}),s==="platform"&&"All Platforms",s==="dex"&&"All DEXes"]}),i.map(x=>e.jsx(Ql,{children:e.jsxs($,{onClick:()=>B(x),size:{base:"sm",lg:"md"},...we,...!y&&u.includes(x)?ze:void 0,children:[e.jsx(Pe,{isChecked:!y&&(u.includes(x)??!1)}),e.jsxs(P,{as:"span",display:"flex",alignItems:"center",children:[e.jsx(de,{src:s==="platform"?w(x):k(x),w:"16px",h:"16px",mr:"7px",loading:"lazy"}),s==="platform"&&Ie(H,x),s==="dex"&&Me(z,x)]})]})},x))]})}),e.jsx(We,{children:e.jsx($,{onClick:F,isDisabled:u.length===0,children:"Save"})})]})]})]})};function Ee(s,a){return a==="all"?s:a}const N=({children:s,labelWidth:a,...r})=>e.jsx(Be,{direction:{base:"column",xl:"row"},spacing:{base:2,xl:3},align:"center",...r,sx:{"> span":{xl:{w:a??"85px",textAlign:"right"}}},children:s}),S=s=>e.jsx(xl,{inputMode:"numeric",size:"sm",fontSize:{base:"16px",lg:"sm"},...s}),v=(s,a)=>{if(s!=null)return a},L=M.object({min:M.number().optional().nullable(),max:M.number().optional().nullable()}),Kl=M.object({filters:M.object({chainIds:M.union([ke(M.string()),M.literal("all")]).nullable().optional(),dexIds:M.union([ke(M.string()),M.literal("all")]).nullable().optional(),txns:M.record(L).optional(),buys:M.record(L).optional(),sells:M.record(L).optional(),volume:M.record(L).optional(),priceChange:M.record(L).optional(),liquidity:L.optional(),marketCap:L.optional(),fdv:L.optional(),pairAge:L.optional()}).optional()}),es=({customScreenerParams:s,options:a,onChange:r,onClose:o})=>{var C,y,w,k,B,F,H,z,x,q,j,le,se,g,T,J;const t=cl({defaultValues:s??(a==null?void 0:a.defaultParams),resolver:Bl(Kl)}),c=A.useRef(null),m=t.handleSubmit(n=>{var _,G;if(!n.filters&&!(s!=null&&s.filters)){r(null);return}const l={},{filters:d}=n;d&&(Ze.forEach(I=>{Object.keys((d==null?void 0:d[I])??{}).forEach(W=>{["min","max"].forEach(V=>{var Y,Q,ae,ne,Z;const R=(Q=(Y=d==null?void 0:d[I])==null?void 0:Y[W])==null?void 0:Q[V];R!=null&&(l.filters={...l.filters,[I]:{...(ae=l.filters)==null?void 0:ae[I],[W]:{...(Z=(ne=l.filters)==null?void 0:ne[I])==null?void 0:Z[W],[V]:R}}})})})}),Ke.forEach(I=>{["min","max"].forEach(W=>{var R,Y,Q;const V=(Y=(R=n.filters)==null?void 0:R[I])==null?void 0:Y[W];V!=null&&(l.filters={...l.filters,[I]:{...(Q=l.filters)==null?void 0:Q[I],[W]:V}})})})),((_=n.filters)!=null&&_.chainIds||(G=n.filters)!=null&&G.dexIds)&&(l.filters||(l.filters={}),n.filters.chainIds&&n.filters.chainIds!=="all"&&(l.filters.chainIds=[...n.filters.chainIds]),n.filters.dexIds&&n.filters.dexIds!=="all"&&(l.filters.dexIds=[...n.filters.dexIds])),r(l),o()}),h=()=>{a!=null&&a.resetToEmpty||!(a!=null&&a.defaultParams)?r(null):r(a.defaultParams),o()},i={borderColor:K("accent.350","accent.700"),bg:K("accent.25","accent.925")},u=t.watch();return e.jsxs(He,{size:{base:"4xl",lg:"2xl"},scrollBehavior:"inside",onClose:o,motionPreset:"none",blockScrollOnMount:!1,isOpen:!0,children:[e.jsx(Ve,{}),e.jsxs(Le,{children:[e.jsx(Oe,{}),e.jsx($e,{children:e.jsx(Fe,{size:"md",children:"Customize Filters"})}),e.jsx(qe,{p:5,children:e.jsxs(D,{as:"form",ref:c,onSubmit:m,fontSize:"sm",sx:{"select, input":{_disabled:{opacity:.7,color:K("accent.550","red.300"),fontWeight:"semibold"}}},children:[e.jsxs(N,{mb:5,children:[e.jsx(p,{control:t.control,name:"filters.chainIds",render:({field:n})=>e.jsx(Te,{type:"platform",value:dl(n.value)?n.value:"all",onChange:l=>{n.onChange(l==="all"?null:l),t.setValue("filters.dexIds",[])},buttonProps:{w:"100%",variant:"outline",isDisabled:a==null?void 0:a.disablePlatformPicker}})}),e.jsx(p,{control:t.control,name:"filters.dexIds",render:({field:n})=>{var _,G;const l=Xe((_=u.filters)==null?void 0:_.chainIds)&&((G=u.filters)==null?void 0:G.chainIds.length)===1?u.filters.chainIds[0]??null:null,d=n.value===void 0||n.value===null||n.value==="all"?"all":n.value;return e.jsx(Te,{type:"dex",platformId:l,value:d,onChange:I=>n.onChange(I==="all"?null:I),buttonProps:{w:"100%",variant:"outline",isDisabled:a==null?void 0:a.disableDexPicker}})}})]}),e.jsxs(D,{display:"flex",alignItems:"center",justifyContent:"center",my:5,opacity:.6,children:[e.jsx(De,{}),e.jsx(P,{as:"span",flexShrink:0,fontSize:"xs",mx:2,textTransform:"uppercase",children:"Filters (Optional)"}),e.jsx(De,{})]}),e.jsxs(ue,{spacing:{base:8,lg:6},align:"stretch",children:[e.jsxs(N,{children:[e.jsx(P,{as:"span",flexShrink:0,children:"Liquidity:"}),e.jsxs(E,{size:"sm",...v((y=(C=u.filters)==null?void 0:C.liquidity)==null?void 0:y.min,i),children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Min",thousandSeparator:!0}),control:t.control,name:"filters.liquidity.min"})]}),e.jsxs(E,{size:"sm",...v((k=(w=u.filters)==null?void 0:w.liquidity)==null?void 0:k.max,i),children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Max",thousandSeparator:!0}),control:t.control,name:"filters.liquidity.max"})]})]}),e.jsxs(ue,{spacing:{base:3,lg:2},align:"stretch",children:[e.jsxs(N,{children:[e.jsx(P,{as:"span",flexShrink:0,children:"Market cap:"}),e.jsxs(E,{size:"sm",...v((F=(B=u.filters)==null?void 0:B.marketCap)==null?void 0:F.min,i),children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Min",thousandSeparator:!0}),control:t.control,name:"filters.marketCap.min"})]}),e.jsxs(E,{size:"sm",...v((z=(H=u.filters)==null?void 0:H.marketCap)==null?void 0:z.max,i),children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Max",thousandSeparator:!0}),control:t.control,name:"filters.marketCap.max"})]})]}),e.jsxs(N,{children:[e.jsx(P,{as:"span",flexShrink:0,children:"FDV:"}),e.jsxs(E,{size:"sm",...v((q=(x=u.filters)==null?void 0:x.fdv)==null?void 0:q.min,i),children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Min",thousandSeparator:!0}),control:t.control,name:"filters.fdv.min"})]}),e.jsxs(E,{size:"sm",...v((le=(j=u.filters)==null?void 0:j.fdv)==null?void 0:le.max,i),children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Max",thousandSeparator:!0}),control:t.control,name:"filters.fdv.max"})]})]})]}),e.jsxs(N,{children:[e.jsx(P,{as:"span",flexShrink:0,children:"Pair age:"}),e.jsxs(E,{size:"sm",...v((g=(se=u.filters)==null?void 0:se.pairAge)==null?void 0:g.min,i),children:[e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Min",thousandSeparator:!0}),control:t.control,name:"filters.pairAge.min"}),e.jsx(te,{children:"hours"})]}),e.jsxs(E,{size:"sm",...v((J=(T=u.filters)==null?void 0:T.pairAge)==null?void 0:J.max,i),children:[e.jsx(p,{render:({field:n})=>e.jsx(b,{customInput:S,value:n.value,onValueChange:({floatValue:l})=>n.onChange(l??null),onBlur:n.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Max",thousandSeparator:!0}),control:t.control,name:"filters.pairAge.max"}),e.jsx(te,{children:"hours"})]})]}),["h24","h6","h1","m5"].map(n=>e.jsxs(ue,{spacing:{base:3,lg:2},align:"stretch",children:[e.jsxs(N,{children:[e.jsxs(P,{as:"span",flexShrink:0,children:[O[n].shorthand," txns:"]}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Min",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.txns.${n}.min`}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Max",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.txns.${n}.max`})]}),e.jsxs(N,{children:[e.jsxs(P,{as:"span",flexShrink:0,children:[O[n].shorthand," buys:"]}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Min",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.buys.${n}.min`}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Max",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.buys.${n}.max`})]}),e.jsxs(N,{children:[e.jsxs(P,{as:"span",flexShrink:0,children:[O[n].shorthand," sells:"]}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Min",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.sells.${n}.min`}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:0,allowNegative:!1,placeholder:"Max",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.sells.${n}.max`})]}),e.jsxs(N,{children:[e.jsxs(P,{as:"span",flexShrink:0,children:[O[n].shorthand," volume:"]}),e.jsxs(E,{size:"sm",children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Min",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.volume.${n}.min`})]}),e.jsxs(E,{size:"sm",children:[e.jsx(U,{children:"$"}),e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:2,allowNegative:!1,placeholder:"Max",thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.volume.${n}.max`})]})]}),e.jsxs(N,{children:[e.jsxs(P,{as:"span",flexShrink:0,children:[O[n].shorthand," change:"]}),e.jsxs(E,{size:"sm",children:[e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:2,placeholder:"Min",allowNegative:!0,thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.priceChange.${n}.min`}),e.jsx(te,{children:"%"})]}),e.jsxs(E,{size:"sm",children:[e.jsx(p,{render:({field:l})=>e.jsx(b,{customInput:S,value:l.value,onValueChange:({floatValue:d})=>l.onChange(d??null),onBlur:l.onBlur,decimalScale:2,placeholder:"Max",allowNegative:!0,thousandSeparator:!0,...v(l.value,i)}),control:t.control,name:`filters.priceChange.${n}.max`}),e.jsx(te,{children:"%"})]})]})]},n))]}),e.jsx("input",{type:"submit",hidden:!0})]})}),e.jsxs(We,{gap:"3",children:[e.jsx($,{onClick:m,leftIcon:e.jsx(X,{as:Ue}),colorScheme:"accent",children:"Apply"}),s&&(!(a!=null&&a.defaultParams)||!ul(a.defaultParams,s))&&e.jsx($,{onClick:h,variant:"outline",leftIcon:e.jsx(X,{as:hl}),children:a!=null&&a.resetToEmpty||!(a!=null&&a.defaultParams)?"Reset":"Restore defaults"})]})]})]})},ls=({customParams:s,rankFilterOptions:a,onCustomScreenerParamsChange:r})=>{const o=ce(_e),{value:t,enable:c,disable:m}=gl(!1),h=A.useCallback(()=>{o.track({event:"screenerControl:rankFilter:click"}),c()},[o,c]),i=A.useCallback(C=>{o.track({event:"screenerControl:rankFilter:apply"}),r==null||r(C)},[o,r]);return{customScreenerParamsCount:s!=null&&s.params?Zl({query:s.params,excludePlatforms:(a==null?void 0:a.disablePlatformPicker)??!1,excludeDexes:(a==null?void 0:a.disableDexPicker)??!1}):0,isModalOpened:t,openModal:h,closeModal:m,handleCustomScreenerParamsChange:i}},ss=({customParams:s,isDisabled:a,rankFilterOptions:r,onCustomScreenerParamsChange:o})=>{const{isModalOpened:t,customScreenerParamsCount:c,closeModal:m,openModal:h,handleCustomScreenerParamsChange:i}=ls({customParams:s,rankFilterOptions:r,onCustomScreenerParamsChange:o});return e.jsxs(e.Fragment,{children:[e.jsxs($,{variant:"outline",onClick:h,leftIcon:e.jsx(X,{as:ml}),iconSpacing:"1",isDisabled:a,size:"sm",children:[e.jsx(f,{children:"Filters"}),c>0&&e.jsx(f,{borderRadius:"lg",bg:"accent.500",color:"white",fontSize:"xs",fontWeight:"semibold",px:"1.5",py:"0.5",minWidth:"20px",marginLeft:"2",children:c})]}),t&&e.jsx(es,{customScreenerParams:s?s.params??null:null,options:r,onChange:i,onClose:m})]})},Re="desc",ge="txns",Ne=[{value:"trendingScoreM5",label:"Trending 5M",labelShort:"Trend 5M"},{value:"trendingScoreH1",label:"Trending 1H",labelShort:"Trend 1H"},{value:"trendingScoreH6",label:"Trending 6H",labelShort:"Trend 6H"},{value:"trendingScoreH24",label:"Trending 24H",labelShort:"Trend 24H"},{value:"txns",label:"Txns",labelShort:"Txns"},{value:"buys",label:"Buys",labelShort:"Buys"},{value:"sells",label:"Sells",labelShort:"Sells"},{value:"volume",label:"Volume",labelShort:"Vol"},{value:"priceChangeH24",label:"24H price change",labelShort:"24H Chg."},{value:"priceChangeH6",label:"6H price change",labelShort:"6H Chg."},{value:"priceChangeH1",label:"1H price change",labelShort:"1H Chg."},{value:"priceChangeM5",label:"5M price change",labelShort:"5M Chg."},{value:"liquidity",label:"Liquidity",labelShort:"Liq."},{value:"marketCap",label:"Market Cap",labelShort:"MCAP"},{value:"fdv",label:"FDV",labelShort:"FDV"},{value:"pairAge",label:"Pair age",labelShort:"Age"},{value:"activeBoosts",label:"Boosts",labelShort:"Boosts"}],as=({rankBy:s,onChange:a,isDisabled:r})=>{const o=Ne.find(h=>h.value===((s==null?void 0:s.key)??ge)),t=jl(o),c=A.useCallback(h=>{var u;const i=vl.safeParse(h);i.success&&(a==null||a({order:i.data,key:((u=t.current)==null?void 0:u.value)??ge}))},[t,a]),m=A.useCallback(h=>{const i=Xe(h)?h[0]:h;i&&(a==null||a({order:(s==null?void 0:s.order)??Re,key:i}))},[a,s==null?void 0:s.order]);return e.jsxs(Ge,{children:[e.jsx(Ye,{as:$,variant:"outline",lineHeight:"1",size:"sm",isDisabled:r,children:e.jsxs(ee,{spacing:"1",children:[e.jsx(X,{as:pl}),e.jsx(f,{display:{base:"none",md:"block"},children:"Rank by:"}),e.jsxs(ee,{spacing:"1",fontWeight:"normal",children:[s===void 0?void 0:e.jsx(X,{as:s.order==="asc"?fl:bl}),o!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(f,{display:{base:"none",md:"block"},children:o.label}),e.jsx(f,{display:{md:"none"},children:o.labelShort})]})]})]})}),e.jsx(Qe,{children:e.jsxs(Je,{zIndex:"modal",maxHeight:"60vh",overflowY:"auto",children:[e.jsxs(me,{defaultValue:Re,value:s==null?void 0:s.order,title:"Order",type:"radio",onChange:c,children:[e.jsx(oe,{value:"desc",children:"Descending"}),e.jsx(oe,{value:"asc",children:"Ascending"})]}),e.jsx(Sl,{}),e.jsx(me,{defaultValue:ge,value:s==null?void 0:s.key,title:"Rank by",type:"radio",onChange:m,children:Ne.map(h=>e.jsx(oe,{value:h.value,children:h.label},h.value))})]})})]})},ns=({isDisabled:s,timeframe:a,onTimeframeChange:r})=>{const o=ce(_e),t=A.useCallback(c=>{o.track({event:"screenerControl:timeframe:click"}),r(Cl.parse(c))},[o,r]);return e.jsxs(Ge,{strategy:"fixed",children:[e.jsxs(Ye,{as:$,colorScheme:"accent",leftIcon:e.jsx(X,{as:Il}),rightIcon:e.jsx(X,{as:Ml}),iconSpacing:"1",isDisabled:s,size:"sm",children:[e.jsx(f,{display:{base:"initial",md:"none"},children:O[a].shorthand}),e.jsx(f,{display:{base:"none",md:"initial"},children:O[a].label})]}),e.jsx(Qe,{children:e.jsx(Je,{zIndex:"modal",ml:{base:2,lg:0},children:e.jsx(me,{value:a,onChange:t,children:Object.entries(O).map(([c,m])=>e.jsx(oe,{value:c,closeOnSelect:!0,children:m.label},c))})})})]})},rs=s=>e.jsx(Dl,{isAttached:!0,sx:{"button:not(:first-of-type)":{borderLeftWidth:0}},...s}),ts=({isTimeframeDisabled:s,isTimeframePickerVisible:a=!0,isRankFilterDisabled:r,isFilterVisible:o,isBooleanFiltersVisible:t,isRankVisible:c,customParams:m,onCustomScreenerParamsChange:h,rankFilterOptions:i,timeframe:u,rankBy:C,onTimeframeChange:y,onRankChange:w,children:k,defaultColumnsOrder:B,screenerSettings:F,onScreenerSettingsChange:H})=>{const z=A.useRef(null);return e.jsx(Rl,{childRef:z,scrollSpeed:1.5,scrollShadeBackground:K("gray.25","gray.950"),children:e.jsxs(D,{ref:z,flex:"1",display:"flex",width:"100%",gap:"2",padding:"2",paddingRight:"0",children:[a&&e.jsx(D,{marginRight:{"2xl":2},children:e.jsx(ns,{isDisabled:s,timeframe:u,onTimeframeChange:y})}),k,e.jsx($l,{customScreenerParams:m,isVisible:{eti:t,boosts:t,ads:t},isDisabled:r,onCustomScreenerParamsChange:h}),e.jsxs(D,{as:rs,marginLeft:"auto",paddingLeft:{"2xl":2},display:"inline-flex",paddingRight:"2",children:[c&&e.jsx(as,{isDisabled:r,rankBy:C,onChange:w}),o&&e.jsx(ss,{isDisabled:r,customParams:m,rankFilterOptions:i,onCustomScreenerParamsChange:h}),e.jsx(Fl,{settings:F,defaultColumnsOrder:B,onSettingsChange:H})]})]})})},bs=({customParams:s,customScreenerId:a,disableRankBy:r,disableFilter:o,disableBooleanFilters:t,disableTimeframePicker:c,heading:m,footer:h,onCustomParamsChange:i,onSort:u,onTimeframeChange:C,onRankChange:y,screenerVariant:w,topOffset:k=0,renderScreenerControl:B,connectionType:F="url"})=>{var fe,be;const H=F==="url"?_l:El,{config:{chainId:z,dexId:x,screenerType:q},data:j,sorting:{sorting:le},rankFilterOptions:se,state:g,controlValue:{timeframe:T,page:J},currentQuery:n}=H(),l=A.useRef(null),d=A.useRef(null),{navWidth:_,headerHeight:G,footerHeight:I}=kl(),{colorMode:W}=je(),V=K("gray.25","gray.950"),R=Al(),Y=yl(),Q=Pl(),ae=A.useCallback(re=>{var Se;u(re),(Se=l.current)==null||Se.scrollTo({top:0,behavior:"smooth"})},[u,l]),ne=A.useCallback(re=>`${wl({platformId:z,dexId:x,customScreenerId:a,page:re.page,timeframe:T})}${re.search}`,[a,x,T,z]),Z=T&&((fe=j==null?void 0:j.stats)!=null&&fe[T])?{latestBlock:(q==="chain"||q==="dex")&&(j!=null&&j.latestBlock)?j.latestBlock:void 0,stats:j.stats[T],timeframeKey:T}:void 0,el={"--ds-dex-screener-heading-sticky-top":(be=d.current)!=null&&be.clientHeight?`${d.current.clientHeight}px`:"48px",...zl({colorMode:W})},{settings:pe,setSettings:ll}=ql(w,a);return e.jsxs(e.Fragment,{children:[e.jsxs(D,{ref:l,display:Q?"none":"block",w:{base:"100vw",lg:`calc(100vw - ${_}px)`},h:{base:`calc(100vh - ${k}px - ${G}px - ${I}px)`,lg:`calc(100vh - ${k}px - ${I}px)`},overflow:"auto",bg:V,sx:el,children:[g.isLoading&&e.jsx(Tl,{topOffset:k}),g.isDisconnected&&e.jsx(Gl,{topOffset:k}),g.isReconnecting&&e.jsx(Ol,{delay:1e4,children:e.jsx(Hl,{})}),g.isSchemaOutdated&&e.jsx(Vl,{topOffset:k}),j&&!g.isSchemaOutdated&&j.stats&&j.pairs&&e.jsxs(e.Fragment,{children:[m,e.jsx(Nl,{variant:"screener",containerProps:{paddingLeft:2,paddingRight:2,paddingTop:2,position:"sticky",left:0,width:"100%"}}),Z&&e.jsx(Jl,{containerProps:{position:"sticky",left:0,width:"100%",paddingLeft:2,paddingRight:2,paddingTop:2},...Z}),e.jsx(D,{position:"sticky",top:"0",left:"0",ref:d,zIndex:"banner",background:V,children:e.jsx(ts,{isTimeframeDisabled:g.isLoading||g.isUpdatingFilters||g.isSwitchingNamespace||g.isSwitchingPage||g.isDisconnected,isRankFilterDisabled:g.isLoading||g.isUpdatingFilters||g.isSwitchingNamespace||g.isSwitchingPage||g.isDisconnected,isBooleanFiltersVisible:t!==!0,isFilterVisible:o!==!0,isRankVisible:r!==!0,isTimeframePickerVisible:c!==!0,timeframe:T,onTimeframeChange:C,onRankChange:y,onCustomScreenerParamsChange:i,customParams:s,rankFilterOptions:se,rankBy:n.rankBy,defaultColumnsOrder:Wl[w],screenerSettings:pe,onScreenerSettingsChange:ll,children:B&&B()})}),e.jsx(Ul,{isLoading:g.isLoading||g.isSwitchingNamespace||g.isUpdatingFilters,platformId:z,dexId:x,screenerType:q,timeframeKey:T,latestScreenerTimeframeKey:T,screenerVariant:w,screenerPairs:j.pairs,page:J,isSwitchingPage:g.isSwitchingPage,sorting:le,onSort:ae,settings:pe,customScreenerId:a}),!g.isLoading&&h,g.hasPagination&&!g.isLoading&&!g.isUpdatingFilters&&!g.isSwitchingNamespace&&!g.isSwitchingPage?e.jsx(Xl,{label:"pairs",currentPage:J,currentPageItemsCount:j.pairs.length,count:j.pairsCount,getPagePath:ne}):null,e.jsx(D,{pb:{base:"90px",lg:0},mb:{base:"90px",lg:`${I+60}px`}})]})]}),R&&e.jsx(Ll,{chainId:R.platformId,dexId:R.dexId,pairAddress:R.pairAddress,screenerPairs:j==null?void 0:j.pairs,onClose:()=>Y()})]})};export{bs as D,Zl as g};
