const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/connect-rainbowkit-button-Dr85sJJG.js","assets/entries/pages_catch-all.DeNA4nR9.js","assets/chunks/preload-helper-DJsytJB9.js","assets/static/src_presentation_components_nav-link_nav-link-24958f2e.3Tmj03nP.css","assets/static/src_presentation_components_nav-main_nav-main.DlJ9Hieh.css","assets/static/src_presentation_components_change-percentage_change-percentage.De5TmJFb.css","assets/static/src_presentation_components_nav-header-icon_nav-header-icon.DfgF_AXH.css","assets/static/src_presentation_pages_app.BoYzLVi2.css","assets/chunks/index-DWF-2XFl.js","assets/chunks/delayed-Cer_z3Z7.js","assets/static/style-93466de9.QnqDrZxQ.css"])))=>i.map(i=>d[i]);
import{b5 as D,y as N,cC as E,aY as P,cD as $,j as p,k as e,x as v,cE as Y,bB as A,b1 as B,al as J,bn as K,am as X,bC as O,an as q,ao as Q,ar as Z,aq as ee,B as S,T as ne,V as te,K as y,cF as F,cG as se,c1 as oe,m as re,a7 as m,cH as ae,cI as W,H as z,cJ as ie,s as ce,cK as T,cL as le,cM as de,a8 as ue,cN as L,cO as he,a9 as ge,cP as fe,cQ as pe}from"../entries/pages_catch-all.DeNA4nR9.js";import{_ as be}from"./preload-helper-DJsytJB9.js";/* empty css                                                                            */import{B as xe}from"./index.esm-DdF9dPvy.js";import{I as me,a as ve}from"./index.esm-du_aSLpT.js";import{S as R}from"./span-BbxB5wGs.js";import{u as ye}from"./upperFirst-LabUiU-Y.js";/* empty css                                                               *//* empty css                                                                      *//* empty css                                                                                        *//* empty css                                                                                    *//* empty css                                                   */function I(i){return ye(D(i).toLowerCase())}const we=N($,P,(i,c)=>({actions:{create:async o=>{const u=await E(c.ensuredCurrentUser);i.create(u.id,{schemaVersion:o.schemaVersion,provider:o.provider,token:o.token})},delete:async o=>i.delete(o)}})),Ce=({onClick:i,message:c})=>{const[o,u]=p.useState(!1),r=p.useCallback(()=>{const f=document.createElement("link");f.href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,700&display=swap",f.rel="stylesheet",f.onload=()=>u(!0),document.head.appendChild(f),u(!0)},[]);return p.useEffect(()=>{o||r()},[o,r]),e.jsx(v,{onClick:i,display:"flex",alignItems:"center",color:"white",justifyContent:"center",fontFamily:o?"Roboto":"sans-serif",fontWeight:"bold",cursor:"pointer",outline:"none",backgroundColor:"#4285F4",boxShadow:"0px 2px 3px rgba(0, 0, 0, 0.2)",height:"38px",width:"240px",leftIcon:e.jsx(Y,{size:14}),_hover:{opacity:"0.8"},children:c})},Se=i=>{let c={title:"",header:""};return i&&i.isAuthenticated?c={title:"My account",header:""}:c={title:"Sign-in",header:"Sign-in to DEX Screener to sync your settings, lists and alerts accross unlimited devices."},{texts:c}},ke=re(()=>be(()=>import("./connect-rainbowkit-button-Dr85sJJG.js").then(i=>i.aJ),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),je=({onClose:i,handleProviderLogout:c,handleProviderLogin:o})=>{const u=m(P),r=A(()=>u.authData,[u.authData]),f=B("black","white"),w=B("white","black");return e.jsxs(J,{size:"lg",onClose:i,motionPreset:"none",blockScrollOnMount:!1,isOpen:!0,isCentered:K({base:!1,md:!0}),children:[e.jsx(X,{sx:{zIndex:50}}),O({value:r,onPending:()=>null,onFailure:()=>null,onSuccess:l=>{const{texts:t}=Se(l);return e.jsxs(q,{sx:{zIndex:50,minHeight:l.isAuthenticated?320:370},children:[e.jsx(Q,{}),e.jsxs(Z,{py:5,px:0,textAlign:"center",children:[e.jsx(ee,{children:t.title}),e.jsxs(S,{mt:2,p:5,children:[!!t.header&&e.jsx(ne,{mb:10,fontSize:"md",children:t.header}),e.jsxs(te,{mt:5,spacing:l.isAuthenticated?5:3,display:"flex",justifyContent:"center",children:[!l.allProvidersConnected&&!l.googleProvider?e.jsx(Ce,{onClick:()=>o("google"),message:"Sign in with Google"}):e.jsx(v,{height:"38px",width:"240px",leftIcon:e.jsx(y,{as:F,color:"green.300"}),borderColor:"green.300",borderWidth:1,onClick:c,fontWeight:"normal",children:"Signed in with Google"}),!l.allProvidersConnected&&!l.appleProvider?e.jsx(v,{height:"38px",width:"240px",leftIcon:e.jsx(y,{as:se,color:w,height:"18px",marginBottom:"2px"}),backgroundColor:f,color:w,onClick:()=>o("apple"),fontFamily:"system-ui",fontWeight:"bold",_hover:{opacity:.8},children:"Sign in with Apple"}):e.jsx(v,{height:"38px",width:"240px",leftIcon:e.jsx(y,{as:F,color:"green.300"}),borderColor:"green.300",borderWidth:1,onClick:c,_hover:{opacity:.8},fontWeight:"normal",children:"Signed in with Apple"}),!l.allProvidersConnected&&!l.web3walletProvider?e.jsx(p.Suspense,{fallback:e.jsx(v,{width:"240px",height:"38px",isDisabled:!0,children:e.jsx(oe,{})}),children:e.jsx(ke,{})}):e.jsx(v,{height:"38px",width:"240px",leftIcon:e.jsx(y,{as:F,color:"green.300"}),borderColor:"green.300",borderWidth:1,onClick:c,fontWeight:"normal",children:"Wallet Connected"})]})]})]})]})}})]})},Ie=p.memo(i=>{const{loading:c,onSignIn:o,onSignOut:u}=i,r=m(P),f=A(()=>r.authData,[r.authData]),w=A(()=>r.currentUser,[r.currentUser]);return O({value:ae(w,f,(l,t)=>({currentUser:l,authData:t})),onPending:()=>null,onFailure:()=>null,onSuccess:({currentUser:l,authData:t})=>{const k=t.allProvidersConnected?u:o,b=t.isAnonymous?v:S;return e.jsxs(b,{fontWeight:"normal",bg:"blue.1000",fontSize:{base:"lg",lg:"inherit"},_focus:{boxShadow:"none",bg:"blue.950"},paddingLeft:{base:2,lg:3},variant:"unstyled",display:"flex",width:"100%",borderRadius:0,color:"white",onClick:t.isAnonymous?k:()=>null,sx:t.isAnonymous?{"@media(hover: hover)":{_hover:{bg:"blue.950"}}}:void 0,height:"auto",justifyContent:"space-between",borderTopWidth:{base:0,lg:"1px"},borderBottomWidth:{base:"1px",lg:0},borderColor:"blue.950",children:[e.jsx(W,{isDisabled:!l,label:t.username,children:e.jsxs(z,{spacing:1,marginEnd:l?0:1,overflow:"hidden",px:{base:1,lg:0},py:{base:3,lg:"10px"},children:[e.jsx(y,{as:ie,boxSize:"18px"}),e.jsx(R,{fontSize:"md",noOfLines:1,cursor:"default",children:t.username})]})}),e.jsxs(S,{display:"flex",fontWeight:"semibold",_focus:{boxShadow:"none"},children:[!t.isAnonymous&&!c&&e.jsx(S,{children:e.jsx(W,{isDisabled:!t.allProvidersConnected,label:"Sign out",children:e.jsx(v,{onClick:k,variant:"ghost",height:"100%",borderRadius:0,width:"auto",paddingLeft:2,paddingRight:2,iconSpacing:1,lineHeight:"1",fontSize:"xs",color:"blue.600",_focus:{bg:"blue.950",color:"white",boxShadow:"none"},sx:{"@media(hover: hover)":{_hover:{bg:"blue.950",color:"white"}}},children:t.allProvidersConnected?e.jsx(y,{as:me,boxSize:"16px"}):e.jsx(y,{as:ve,boxSize:"16px"})})})}),t.isAnonymous&&!c&&e.jsxs(z,{marginX:2,spacing:1,children:[e.jsx(y,{as:xe,boxSize:"16px"}),e.jsx(R,{fontSize:"xs",children:"Sign-in"})]})]})]})}})}),Re=p.memo(()=>{const i=m(we),c=m(he),o=m(P),u=m(ue),r=m(ge),f=ce(),w=m(fe),[l,t]=p.useState(!1),k=A(()=>o.authData,[o.authData]),b=O({value:k,onFailure:()=>T,onPending:()=>T,onSuccess:n=>n});p.useEffect(()=>{b.isAuthenticated&&t(!1)},[b]);const g=p.useCallback((n,a,x)=>{if(!a)return;const U={signIn:{success:`You were successfully signed in with ${I(x)}.`,error:`Failed to sign in with ${I(x)}, try again.`},signOut:{success:"You were successfully signed out.",error:"Failed to sign out, try again."},link:{success:"Account linked successfully!",error:`Failed to link to your ${I(x)} account, try again.`},inUse:{success:"",error:`There's an account already linked to this ${I(x)} email.`}};f({status:a,title:U[n][a],isClosable:!0})},[f]),H=p.useCallback(()=>{t(!0),u.track({event:"user:login-initiated"})},[u]),_=p.useCallback(async()=>{g("signOut","success"),await E(o.signOut()),t(!1),u.track({event:"user:logout"})},[o,u,g]),M=new le,C=new de("apple.com");C.addScope("email"),C.addScope("name"),C.setCustomParameters({locale:"en"});const V=async n=>{const a=await w();if(!a.currentUser)return;const x=n==="google"?M:C;switch(n){case"google":{const d=a.currentUser.providerData.find(s=>s.providerId==="google.com");if(!(b!=null&&b.googleProvider)&&d){await i.actions.create({schemaVersion:"1.0.0",provider:n,token:d.uid}).catch(s=>{r.error({id:"failedCreatingAuthProviderOnFallbackMethod",data:{provider:n,error:s}}),g("link","error",n)});return}break}case"apple":{const d=a.currentUser.providerData.find(s=>s.providerId==="apple.com");!(b!=null&&b.appleProvider)&&d&&await i.actions.create({schemaVersion:"1.0.0",provider:n,token:d.uid}).catch(s=>{r.error({id:"failedCreatingAuthProviderOnFallbackMethod",data:{provider:n,error:s}}),g("link","error",n)})}break}const j=await(await c()).httpsCallable("authenticateAuthProvider");pe(a.currentUser,x).then(async d=>{var s;if(!d.providerId){r.error({event:{id:"emptyProviderId",data:{userId:(s=a.currentUser)==null?void 0:s.uid,result:d}}}),g("link","error",n);return}if(d.user.providerData[0]){const h=await j({provider:n,token:d.user.providerData[0].uid});h.data.success||(r.error({event:{id:"failedOnCallingAuthenticateUserFunction",data:{error:h.data.error}}}),g("link","error",n))}g("link","success",n),t(!1)}).catch(d=>{var s;d.code==="auth/credential-already-in-use"&&g("inUse","error",n),r.error({event:{id:"failedAddingProviderToUser",data:{provider:n,error:d,userId:(s=a.currentUser)==null?void 0:s.uid}}})})},G=async n=>{var d;const a=await w();if(a.currentUser&&!a.currentUser.isAnonymous)return V(n);const x=(d=a.currentUser)!=null&&d.isAnonymous?a.currentUser.uid:void 0,j=await(await c()).httpsCallable("authenticateAuthProvider");switch(n){case"google":{await L(a,M).then(async s=>{if(s.user.providerData[0]){const h=await j({anonymousUserId:x,provider:n,token:s.user.providerData[0].uid});h.data.success||r.error({event:{id:"failedOnCallingAuthenticateUserFunction",data:{error:h.data.error}}})}g("signIn","success",n),t(!1)}).catch(s=>{var h;r.error({event:{id:"failedHandlingProviderLogin",data:{provider:n,error:s,userId:(h=a.currentUser)==null?void 0:h.uid}}}),g("signIn","error",n)});break}case"apple":{await L(a,C).then(async s=>{if(s.user.providerData[0]){const h=await j({anonymousUserId:x,provider:n,token:s.user.providerData[0].uid});h.data.success||r.error({event:{id:"failedOnCallingAuthenticateUserFunction",data:{error:h.data.error}}})}g("signIn","success",n),t(!1)}).catch(s=>{var h;r.error({event:{id:"failedHandlingProviderLogin",data:{provider:n,error:s,userId:(h=a.currentUser)==null?void 0:h.uid}}}),g("signIn","error",n)});break}}};return e.jsxs(S,{textAlign:"center",justifyContent:"space-between",width:"100%",children:[e.jsx(Ie,{loading:l,onSignIn:H,onSignOut:_}),l&&e.jsx(je,{onClose:()=>t(!1),handleProviderLogout:_,handleProviderLogin:G})]})});export{Re as default};
